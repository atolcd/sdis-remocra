<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>referencer_couches_cartographiques</name>
    <description />
    <extended_description />
    <trans_version />
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>/</directory>
    <parameters>
    </parameters>
    <log>
      <trans-log-table>
        <connection />
        <schema />
        <table />
        <size_limit_lines />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject />
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject />
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject />
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject />
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection />
        <schema />
        <table />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection />
      <table />
      <field />
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file />
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2018/06/26 12:07:12.401</created_date>
    <modified_user>-</modified_user>
    <modified_date>2018/06/26 12:07:12.401</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>Remocra (Postgis)</name>
    <server>${REMOCRA_POSTGIS_DATABASE_HOST}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${REMOCRA_POSTGIS_DATABASE_NAME}</database>
    <port>${REMOCRA_POSTGIS_DATABASE_PORT}</port>
    <username>${REMOCRA_POSTGIS_DATABASE_USER_NAME}</username>
    <password>${REMOCRA_POSTGIS_DATABASE_USER_PASSWORD}</password>
    <servername />
    <data_tablespace />
    <index_tablespace />
    <attributes>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>${REMOCRA_POSTGIS_DATABASE_PORT}</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>Factice WMS</from>
      <to>Métadonnées du service WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Factice WMS</from>
      <to>Couches du service WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Métadonnées du service WMS</from>
      <to>Service OGC WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>DELETE des services</from>
      <to>type_service=WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>type_service=WMS</from>
      <to>URL GetCapabilities WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>URL GetCapabilities WMS</from>
      <to>Récup. Capabilities WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Service OGC WMS</from>
      <to>Recup. service_id WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>type_service=WMTS</from>
      <to>URL GetCapabilities WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>URL GetCapabilities WMTS</from>
      <to>Récup. Capabilities WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>DELETE des services</from>
      <to>type_service=WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Factice WMTS</from>
      <to>Métadonnées du service WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Métadonnées du service WMTS</from>
      <to>Service OGC WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Ressemble à XML WMTS</from>
      <to>Factice</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Factice WMTS</from>
      <to>Grilles WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Grilles WMTS</from>
      <to>Calcul de resolution</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Service OGC WMTS</from>
      <to>Recup. service_id WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recup. service_id WMS</from>
      <to>Normalisation WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recup. service_id WMTS</from>
      <to>Normalisation WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Normalisation WMS</from>
      <to>Tri lignes</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Tri lignes</from>
      <to>Couche OGC WMS ou WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Récup. Capabilities WMS</from>
      <to>Statut WMS OK</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Récup. Capabilities WMTS</from>
      <to>Statut WMTS OK</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Statut WMS OK</from>
      <to>Ressemble à XML WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Ressemble à XML WMTS</from>
      <to>Factice WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Ressemble à XML WMS</from>
      <to>Factice WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Statut WMTS OK</from>
      <to>Factice</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Statut WMS OK</from>
      <to>Factice</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Statut WMTS OK</from>
      <to>Ressemble à XML WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Récup. Capabilities WMTS</from>
      <to>Factice 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>XSL -> Json (WMS)</from>
      <to>URL + CODE</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Factice WMTS</from>
      <to>Couches du service WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recherche dans flux</from>
      <to>Filtrage lignes</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Niveaux de grilles des couches WMTS</from>
      <to>Recherche dans flux</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Filtrage lignes</from>
      <to>Resolution min/max pour la couche</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recup. infos TM</from>
      <to>Altération structure flux</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Altération structure flux</from>
      <to>URL + CODE + infos TM</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Couches du service WMS</from>
      <to>MD5 WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>MD5 WMS</from>
      <to>XSL -> Json (WMS)</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Couches du service WMTS</from>
      <to>MD5 WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>MD5 WMTS</from>
      <to>XSL -> Json (WMTS)</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>URL + CODE + infos TM</from>
      <to>Recup. service_id WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Normalisation WMTS</from>
      <to>Tri lignes</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Couches du service WMTS</from>
      <to>Grilles des couches WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Couches du service WMTS</from>
      <to>Niveaux de grilles des couches WMTS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calcul de resolution</from>
      <to>Resolution min/max  pour tileMatrixSet</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Grilles des couches WMTS</from>
      <to>Recherche dans flux 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Resolution min/max  pour tileMatrixSet</from>
      <to>Recherche dans flux 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recherche dans flux 3</from>
      <to>Layer/TileMatrixSet</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calcul de resolution</from>
      <to>Recherche dans flux</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Layer/TileMatrixSet</from>
      <to>Recup. resolution couche</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Resolution min/max pour la couche</from>
      <to>Recup. resolution couche</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recup. resolution couche</from>
      <to>Resolution / layer non nul</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Resolution / layer non nul</from>
      <to>Factice 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Resolution / layer non nul</from>
      <to>Resolution Grille -> Resolution layer</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Resolution Grille -> Resolution layer</from>
      <to>Factice 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sources OGC</from>
      <to>DELETE des services</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Récup. Capabilities WMS</from>
      <to>Factice 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Ressemble à XML WMS</from>
      <to>Factice</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>URL + CODE</from>
      <to>champ titre (WMS)</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>champ titre (WMS)</from>
      <to>Recup. service_id WMS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>XSL -> Json (WMTS)</from>
      <to>Recup. infos TM</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Factice 3</from>
      <to>champ titre (WMTS)</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>champ titre (WMTS)</from>
      <to>Recup. infos TM</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>Altération structure flux</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>resolution_min_layer</name>
        <rename>resolution_min_layer</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000000000000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>resolution_max_layer</name>
        <rename>resolution_max_layer</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000000000000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>540</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Calcul de resolution</name>
    <type>Janino</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <formula>
      <field_name>resolution</field_name>
      <formula_string>Double.parseDouble(ScaleDenominator)*0.00028</formula_string>
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <replace_field />
    </formula>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1620</xloc>
      <yloc>1140</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Couche OGC WMS ou WMTS</name>
    <type>TableOutput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>Remocra (Postgis)</connection>
    <schema>remocra</schema>
    <table>ogc_couche</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field />
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field />
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>Y</return_keys>
    <return_field>service_id</return_field>
    <fields>
      <field>
        <column_name>definition</column_name>
        <stream_name>layerJson</stream_name>
      </field>
      <field>
        <column_name>nom</column_name>
        <stream_name>layerName</stream_name>
      </field>
      <field>
        <column_name>code</column_name>
        <stream_name>code</stream_name>
      </field>
      <field>
        <column_name>ogc_service</column_name>
        <stream_name>service_id</stream_name>
      </field>
      <field>
        <column_name>titre</column_name>
        <stream_name>titre</stream_name>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2895</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Couches du service WMS</name>
    <type>getXMLData</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>layerName</name>
        <xpath>*[name()='Name']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerTitle</name>
        <xpath>*[name()='Title']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerAbstract</name>
        <xpath>*[name()='Abstract']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerNode</name>
        <xpath>.</xpath>
        <element_type>node</element_type>
        <result_type>singlenode</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='WMS_Capabilities']/*[name()='Capability']/*[name()='Layer']/*[name()='Layer']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>xmlCapabilities</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Couches du service WMTS</name>
    <type>getXMLData</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>layerTitle</name>
        <xpath>ows:Title</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerName</name>
        <xpath>ows:Identifier</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerAbstract</name>
        <xpath>ows:Abstract</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>layerNode</name>
        <xpath>.</xpath>
        <element_type>node</element_type>
        <result_type>singlenode</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='Capabilities']/*[name()='Contents']/*[name()='Layer']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>xmlCapabilities</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>540</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>DELETE des services</name>
    <type>ExecSQL</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>Remocra (Postgis)</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>N</replace_variables>
    <quoteString>N</quoteString>
    <sql>DELETE FROM remocra.ogc_service WHERE ogc_source = ?;
ALTER SEQUENCE remocra.ogc_service_id_seq RESTART;
ALTER SEQUENCE remocra.ogc_couche_id_seq RESTART;
</sql>
    <set_params>N</set_params>
    <insert_field />
    <update_field />
    <delete_field />
    <read_field />
    <arguments>
      <argument>
        <name>source_id</name>
      </argument>
    </arguments>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>420</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Factice</name>
    <type>Dummy</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1170</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Factice 2</name>
    <type>Dummy</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>870</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Factice 3</name>
    <type>Dummy</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2250</xloc>
      <yloc>975</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Factice WMS</name>
    <type>Dummy</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Factice WMTS</name>
    <type>Dummy</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Filtrage lignes</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to />
    <send_false_to />
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>resolution</leftvalue>
        <function>&gt;</function>
        <rightvalue />
        <value>
          <name>constant</name>
          <type>Number</type>
          <text>0.0</text>
          <length>-1</length>
          <precision>-1</precision>
          <isnull>N</isnull>
          <mask>#.#;-#.#</mask>
        </value>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1770</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Grilles WMTS</name>
    <type>getXMLData</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>tilematrixName</name>
        <xpath>ows:Identifier</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>Integer</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>ScaleDenominator</name>
        <xpath>*[name()='ScaleDenominator']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>tilematrixSetName</name>
        <xpath>../ows:Identifier</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>tilematrixSetCrs</name>
        <xpath>../ows:SupportedCRS</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='Capabilities']/*[name()='Contents']/*[name()='TileMatrixSet'][contains(ows:SupportedCRS,'EPSG') and contains(ows:SupportedCRS,'3857')]/*[name()='TileMatrix']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>xmlCapabilities</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1500</xloc>
      <yloc>1140</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Grilles des couches WMTS</name>
    <type>getXMLData</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>tilematrixSetName</name>
        <xpath>.</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='Layer']/*[name()='TileMatrixSetLink']/*[name()='TileMatrixSet']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>layerNode</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1515</xloc>
      <yloc>945</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Layer/TileMatrixSet</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to />
    <send_false_to />
    <compare>
      <condition>
        <negated>N</negated>
        <conditions>
          <condition>
            <negated>N</negated>
            <leftvalue>resolution_min_matrixset</leftvalue>
            <function>IS NOT NULL</function>
            <rightvalue />
          </condition>
          <condition>
            <negated>N</negated>
            <operator>AND</operator>
            <leftvalue>resolution_max_matrixset</leftvalue>
            <function>IS NOT NULL</function>
            <rightvalue />
          </condition>
        </conditions>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1950</xloc>
      <yloc>945</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>MD5 WMS</name>
    <type>CheckSum</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <checksumtype>MD5</checksumtype>
    <resultfieldName>code</resultfieldName>
    <resultType>hexadecimal</resultType>
    <compatibilityMode>N</compatibilityMode>
    <fields>
      <field>
        <name>url</name>
      </field>
      <field>
        <name>type_service</name>
      </field>
      <field>
        <name>layerName</name>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1515</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>MD5 WMTS</name>
    <type>CheckSum</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <checksumtype>MD5</checksumtype>
    <resultfieldName>code</resultfieldName>
    <resultType>hexadecimal</resultType>
    <compatibilityMode>N</compatibilityMode>
    <fields>
      <field>
        <name>url</name>
      </field>
      <field>
        <name>type_service</name>
      </field>
      <field>
        <name>layerName</name>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1515</xloc>
      <yloc>540</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Métadonnées du service WMS</name>
    <type>getXMLData</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>titre</name>
        <xpath>*[name()='Title']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>resume</name>
        <xpath>*[name()='Abstract']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='WMS_Capabilities']/*[name()='Capability']/*[name()='Layer']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>xmlCapabilities</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>90</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Métadonnées du service WMTS</name>
    <type>getXMLData</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>titre</name>
        <xpath>ows:Title</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>resume</name>
        <xpath>ows:Abstract</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='Capabilities']/ows:ServiceIdentification</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>xmlCapabilities</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1350</xloc>
      <yloc>1200</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Niveaux de grilles des couches WMTS</name>
    <type>getXMLData</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <include>N</include>
    <include_field />
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>N</doNotFailIfNoFile>
    <rownum_field />
    <encoding>UTF-8</encoding>
    <file>
      <name />
      <filemask />
      <exclude_filemask />
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>tilematrixName</name>
        <xpath>*[name()='TileMatrix']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>tilematrixSetName</name>
        <xpath>../../*[name()='TileMatrixSet']</xpath>
        <element_type>node</element_type>
        <result_type>valueof</result_type>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>/*[name()='Layer']/*[name()='TileMatrixSetLink']/*[name()='TileMatrixSetLimits']/*[name()='TileMatrixLimits']</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>layerNode</XmlField>
    <prunePath />
    <shortFileFieldName />
    <pathFieldName />
    <hiddenFieldName />
    <lastModificationTimeFieldName />
    <uriNameFieldName />
    <rootUriNameFieldName />
    <extensionFieldName />
    <sizeFieldName />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1620</xloc>
      <yloc>615</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Normalisation WMS</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>source_id</name>
        <rename />
      </field>
      <field>
        <name>type_service</name>
        <rename />
      </field>
      <field>
        <name>layerName</name>
        <rename />
      </field>
      <field>
        <name>titre</name>
        <rename />
      </field>
      <field>
        <name>layerAbstract</name>
        <rename />
      </field>
      <field>
        <name>service_id</name>
        <rename />
      </field>
      <field>
        <name>layerJson</name>
        <rename />
      </field>
      <field>
        <name>code</name>
        <rename />
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2640</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Normalisation WMTS</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>source_id</name>
        <rename />
      </field>
      <field>
        <name>type_service</name>
        <rename />
      </field>
      <field>
        <name>layerName</name>
        <rename />
      </field>
      <field>
        <name>titre</name>
        <rename />
      </field>
      <field>
        <name>layerAbstract</name>
        <rename />
      </field>
      <field>
        <name>service_id</name>
        <rename />
      </field>
      <field>
        <name>layerJson</name>
        <rename />
      </field>
      <field>
        <name>code</name>
        <rename />
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2640</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recherche dans flux</name>
    <type>StreamLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>Calcul de resolution</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>tilematrixSetName</name>
        <field>tilematrixSetName</field>
      </key>
      <key>
        <name>tilematrixName</name>
        <field>tilematrixName</field>
      </key>
      <value>
        <name>resolution</name>
        <rename>resolution</rename>
        <default />
        <type>Number</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1620</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recherche dans flux 3</name>
    <type>StreamLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>Resolution min/max  pour tileMatrixSet</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>type_service</name>
        <field>type_service</field>
      </key>
      <key>
        <name>tilematrixSetName</name>
        <field>tilematrixSetName</field>
      </key>
      <value>
        <name>resolution_min_matrixset</name>
        <rename>resolution_min_matrixset</rename>
        <default />
        <type>Number</type>
      </value>
      <value>
        <name>resolution_max_matrixset</name>
        <rename>resolution_max_matrixset</rename>
        <default />
        <type>Number</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1800</xloc>
      <yloc>945</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recup. infos TM</name>
    <type>StreamLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>XSL -> Json (WMTS)</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>type_service</name>
        <field>type_service</field>
      </key>
      <key>
        <name>layerName</name>
        <field>layerName</field>
      </key>
      <value>
        <name>layerJson</name>
        <rename>layerJson</rename>
        <default />
        <type>String</type>
      </value>
      <value>
        <name>code</name>
        <rename>code</rename>
        <default />
        <type>None</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2250</xloc>
      <yloc>540</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recup. resolution couche</name>
    <type>StreamLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>Resolution min/max pour la couche</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>type_service</name>
        <field>type_service</field>
      </key>
      <key>
        <name>tilematrixSetName</name>
        <field>tilematrixSetName</field>
      </key>
      <value>
        <name>resolution_min_layer</name>
        <rename>resolution_min_layer</rename>
        <default />
        <type>Number</type>
      </value>
      <value>
        <name>resolution_max_layer</name>
        <rename>resolution_max_layer</rename>
        <default />
        <type>None</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2100</xloc>
      <yloc>945</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recup. service_id WMS</name>
    <type>StreamLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>Service OGC WMS</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>type_service</name>
        <field>type_service</field>
      </key>
      <value>
        <name>service_id</name>
        <rename>service_id</rename>
        <default />
        <type>Integer</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Recup. service_id WMTS</name>
    <type>StreamLookup</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <from>Service OGC WMTS</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>source_id</name>
        <field>source_id</field>
      </key>
      <key>
        <name>type_service</name>
        <field>type_service</field>
      </key>
      <value>
        <name>service_id</name>
        <rename>service_id</rename>
        <default />
        <type>Integer</type>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Resolution / layer non nul</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to>Factice 3</send_true_to>
    <send_false_to>Resolution Grille -> Resolution layer</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <conditions>
          <condition>
            <negated>N</negated>
            <leftvalue>resolution_min_layer</leftvalue>
            <function>IS NOT NULL</function>
            <rightvalue />
          </condition>
          <condition>
            <negated>N</negated>
            <operator>AND</operator>
            <leftvalue>resolution_max_layer</leftvalue>
            <function>IS NOT NULL</function>
            <rightvalue />
          </condition>
        </conditions>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2100</xloc>
      <yloc>1050</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Resolution Grille -> Resolution layer</name>
    <type>SetValueField</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>resolution_min_layer</name>
        <replaceby>resolution_min_matrixset</replaceby>
      </field>
      <field>
        <name>resolution_max_layer</name>
        <replaceby>resolution_max_matrixset</replaceby>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2250</xloc>
      <yloc>1125</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Resolution min/max  pour tileMatrixSet</name>
    <type>MemoryGroupBy</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <give_back_row>N</give_back_row>
    <group>
      <field>
        <name>source_id</name>
      </field>
      <field>
        <name>type_service</name>
      </field>
      <field>
        <name>tilematrixSetName</name>
      </field>
    </group>
    <fields>
      <field>
        <aggregate>resolution_min_matrixset</aggregate>
        <subject>resolution</subject>
        <type>MIN</type>
        <valuefield />
      </field>
      <field>
        <aggregate>resolution_max_matrixset</aggregate>
        <subject>resolution</subject>
        <type>MAX</type>
        <valuefield />
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1800</xloc>
      <yloc>1140</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Resolution min/max pour la couche</name>
    <type>MemoryGroupBy</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <give_back_row>N</give_back_row>
    <group>
      <field>
        <name>source_id</name>
      </field>
      <field>
        <name>type_service</name>
      </field>
      <field>
        <name>layerName</name>
      </field>
      <field>
        <name>tilematrixSetName</name>
      </field>
    </group>
    <fields>
      <field>
        <aggregate>resolution_min_layer</aggregate>
        <subject>resolution</subject>
        <type>MIN</type>
        <valuefield />
      </field>
      <field>
        <aggregate>resolution_max_layer</aggregate>
        <subject>resolution</subject>
        <type>MAX</type>
        <valuefield />
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2100</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Ressemble à XML WMS</name>
    <type>Validator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <validate_all>Y</validate_all>
    <concat_errors>N</concat_errors>
    <concat_separator>|</concat_separator>
    <validator_field>
      <name>xmlCapabilities</name>
      <validation_name>Ressemble à XML</validation_name>
      <max_length />
      <min_length />
      <null_allowed>N</null_allowed>
      <only_null_allowed>N</only_null_allowed>
      <only_numeric_allowed>N</only_numeric_allowed>
      <data_type>None</data_type>
      <data_type_verified>N</data_type_verified>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <max_value />
      <min_value />
      <start_string>&lt;?xml</start_string>
      <end_string />
      <start_string_not_allowed />
      <end_string_not_allowed />
      <regular_expression />
      <regular_expression_not_allowed />
      <error_code />
      <error_description />
      <is_sourcing_values>N</is_sourcing_values>
      <sourcing_step />
      <sourcing_field />
      <allowed_value />
    </validator_field>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1170</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Ressemble à XML WMTS</name>
    <type>Validator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <validate_all>Y</validate_all>
    <concat_errors>N</concat_errors>
    <concat_separator>|</concat_separator>
    <validator_field>
      <name>xmlCapabilities</name>
      <validation_name>Ressemble à XML</validation_name>
      <max_length />
      <min_length />
      <null_allowed>N</null_allowed>
      <only_null_allowed>N</only_null_allowed>
      <only_numeric_allowed>N</only_numeric_allowed>
      <data_type>None</data_type>
      <data_type_verified>N</data_type_verified>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <max_value />
      <min_value />
      <start_string>&lt;?xml</start_string>
      <end_string />
      <start_string_not_allowed />
      <end_string_not_allowed />
      <regular_expression />
      <regular_expression_not_allowed />
      <error_code />
      <error_description />
      <is_sourcing_values>N</is_sourcing_values>
      <sourcing_step />
      <sourcing_field />
      <allowed_value />
    </validator_field>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1170</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Récup. Capabilities WMS</name>
    <type>HTTP</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <url />
    <urlInField>Y</urlInField>
    <urlField>urlCapabilities</urlField>
    <encoding>UTF-8</encoding>
    <httpLogin>cda</httpLogin>
    <httpPassword>Encrypted 2be98afc86aa7f2e4cb79ce73da93f789</httpPassword>
    <proxyHost />
    <proxyPort />
    <socketTimeout />
    <connectionTimeout />
    <closeIdleConnectionsTime />
    <lookup>
    </lookup>
    <result>
      <name>xmlCapabilities</name>
      <code>statut</code>
      <response_time />
      <response_header />
    </result>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>870</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Récup. Capabilities WMTS</name>
    <type>HTTP</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <url />
    <urlInField>Y</urlInField>
    <urlField>urlCapabilities</urlField>
    <encoding>UTF-8</encoding>
    <httpLogin />
    <httpPassword>Encrypted </httpPassword>
    <proxyHost />
    <proxyPort />
    <socketTimeout />
    <connectionTimeout />
    <closeIdleConnectionsTime />
    <lookup>
    </lookup>
    <result>
      <name>xmlCapabilities</name>
      <code>statut</code>
      <response_time />
      <response_header />
    </result>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>870</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Service OGC WMS</name>
    <type>TableOutput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>Remocra (Postgis)</connection>
    <schema>remocra</schema>
    <table>ogc_service</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field />
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field />
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>Y</return_keys>
    <return_field>service_id</return_field>
    <fields>
      <field>
        <column_name>nom</column_name>
        <stream_name>titre</stream_name>
      </field>
      <field>
        <column_name>description</column_name>
        <stream_name>resume</stream_name>
      </field>
      <field>
        <column_name>ogc_source</column_name>
        <stream_name>source_id</stream_name>
      </field>
      <field>
        <column_name>type_service</column_name>
        <stream_name>type_service</stream_name>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>90</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Service OGC WMTS</name>
    <type>TableOutput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>Remocra (Postgis)</connection>
    <schema>remocra</schema>
    <table>ogc_service</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field />
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field />
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>Y</return_keys>
    <return_field>service_id</return_field>
    <fields>
      <field>
        <column_name>nom</column_name>
        <stream_name>titre</stream_name>
      </field>
      <field>
        <column_name>description</column_name>
        <stream_name>resume</stream_name>
      </field>
      <field>
        <column_name>ogc_source</column_name>
        <stream_name>source_id</stream_name>
      </field>
      <field>
        <column_name>type_service</column_name>
        <stream_name>type_service</stream_name>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>1200</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sources OGC</name>
    <type>TableInput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>Remocra (Postgis)</connection>
    <sql>SELECT
	id AS source_id,
	url AS url_base,
	CASE WHEN
		url LIKE wms_url || '%' THEN regexp_replace(url, 'http(s?):\\/\\/.*\\/geoserver', site_url || 'geoserver')
		ELSE replace(url,'[CLES_IGN]',clef_ign)
	END::character varying AS url
FROM
	remocra.ogc_source,
	(SELECT valeur AS wms_url FROM remocra.param_conf WHERE cle = 'WMS_BASE_URL') AS wms,
	(SELECT valeur AS site_url FROM remocra.param_conf WHERE cle = 'PDI_URL_SITE') AS site,
	(SELECT CASE WHEN valeur LIKE '{%' THEN substring(substring(valeur from ': ?''[a-zA-Z0-9]+''') from '[a-zA-Z0-9]+') ELSE valeur END AS clef_ign FROM remocra.param_conf WHERE cle = 'CLES_IGN') AS clef_ign
</sql>
    <limit>0</limit>
    <lookup />
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>195</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Statut WMS OK</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to>Ressemble à XML WMS</send_true_to>
    <send_false_to>Factice</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>statut</leftvalue>
        <function>=</function>
        <rightvalue />
        <value>
          <name>constant</name>
          <type>Integer</type>
          <text>200</text>
          <length>-1</length>
          <precision>0</precision>
          <isnull>N</isnull>
          <mask>#;-#</mask>
        </value>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1020</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Statut WMTS OK</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to>Ressemble à XML WMTS</send_true_to>
    <send_false_to>Factice</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>statut</leftvalue>
        <function>=</function>
        <rightvalue />
        <value>
          <name>constant</name>
          <type>Integer</type>
          <text>200</text>
          <length>-1</length>
          <precision>0</precision>
          <isnull>N</isnull>
          <mask>#;-#</mask>
        </value>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1020</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Tri lignes</name>
    <type>SortRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory />
    <compress>N</compress>
    <compress_variable />
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>titre</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>2</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2640</xloc>
      <yloc>495</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>URL + CODE</name>
    <type>ReplaceString</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[URL]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>url</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[CODE]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>code</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1920</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>URL + CODE + infos TM</name>
    <type>ReplaceString</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <in_stream_name>resolution_min_layer</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>,</replace_string>
        <replace_by_string>.</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string />
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>resolution_max_layer</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>,</replace_string>
        <replace_by_string>.</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string />
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[URL]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>url</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[TM_NOM]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>tilematrixSetName</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[TM_RES_MIN]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>resolution_min_layer</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[TM_RES_MAX]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>resolution_max_layer</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>layerJson</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>[CODE]</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>code</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2445</xloc>
      <yloc>675</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>URL GetCapabilities WMS</name>
    <type>Janino</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <formula>
      <field_name>urlCapabilities</field_name>
      <formula_string>url +"?REQUEST=GetCapabilities&amp;SERVICE="+ type_service + "&amp;VERSION=1.3.0"</formula_string>
      <value_type>String</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <replace_field />
    </formula>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>675</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>URL GetCapabilities WMTS</name>
    <type>Janino</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <formula>
      <field_name>urlCapabilities</field_name>
      <formula_string>url +"?REQUEST=GetCapabilities&amp;SERVICE="+ type_service + "&amp;VERSION=1.0.0"</formula_string>
      <value_type>String</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <replace_field />
    </formula>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>690</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>XSL -> Json (WMS)</name>
    <type>XSLT</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <xslfilename>${Internal.Entry.Current.Directory}/xsl/wms_capabilities_vers_json.xsl</xslfilename>
    <fieldname>layerNode</fieldname>
    <resultfieldname>layerJson</resultfieldname>
    <xslfilefield />
    <xslfilefielduse>N</xslfilefielduse>
    <xslfieldisafile>N</xslfieldisafile>
    <xslfactory>JAXP</xslfactory>
    <parameters>
    </parameters>
    <outputproperties>
    </outputproperties>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1665</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>XSL -> Json (WMTS)</name>
    <type>XSLT</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <xslfilename>${Internal.Entry.Current.Directory}/xsl/wmts_capabilities_vers_json.xsl</xslfilename>
    <fieldname>layerNode</fieldname>
    <resultfieldname>layerJson</resultfieldname>
    <xslfilefield />
    <xslfilefielduse>N</xslfilefielduse>
    <xslfieldisafile>N</xslfieldisafile>
    <xslfactory>JAXP</xslfactory>
    <parameters>
    </parameters>
    <outputproperties>
    </outputproperties>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1650</xloc>
      <yloc>540</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>type_service=WMS</name>
    <type>Constant</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>type_service</name>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <nullif>WMS</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>525</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>type_service=WMTS</name>
    <type>Constant</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>type_service</name>
        <type>String</type>
        <format />
        <currency />
        <decimal />
        <group />
        <nullif>WMTS</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>525</xloc>
      <yloc>765</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>champ titre (WMS)</name>
    <type>Calculator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <calculation>
      <field_name>titre</field_name>
      <calc_type>NVL</calc_type>
      <field_a>layerTitle</field_a>
      <field_b>layerName</field_b>
      <field_c />
      <value_type>String</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2160</xloc>
      <yloc>345</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>champ titre (WMTS)</name>
    <type>Calculator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <calculation>
      <field_name>titre</field_name>
      <calc_type>NVL</calc_type>
      <field_a>layerTitle</field_a>
      <field_b>layerName</field_b>
      <field_c />
      <value_type>String</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2250</xloc>
      <yloc>810</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
    <error>
      <source_step>Métadonnées du service WMS</source_step>
      <target_step />
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
    <error>
      <source_step>Métadonnées du service WMTS</source_step>
      <target_step />
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
    <error>
      <source_step>Ressemble à XML WMS</source_step>
      <target_step>Factice</target_step>
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
    <error>
      <source_step>Ressemble à XML WMTS</source_step>
      <target_step>Factice</target_step>
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
    <error>
      <source_step>Récup. Capabilities WMS</source_step>
      <target_step>Factice 2</target_step>
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
    <error>
      <source_step>Récup. Capabilities WMTS</source_step>
      <target_step>Factice 2</target_step>
      <is_enabled>Y</is_enabled>
      <nr_valuename />
      <descriptions_valuename />
      <fields_valuename />
      <codes_valuename />
      <max_errors />
      <max_pct_errors />
      <min_pct_rows />
    </error>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
</transformation>
